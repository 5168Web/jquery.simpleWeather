(function($){$.extend({simpleWeather:function(d){var d=$.extend({location:'76309',tempUnit:'f',success:function(a){},error:function(a){}},d);var e='http://query.yahooapis.com/v1/public/yql?format=json&diagnostics=true&callback=&q=';if(d.location!='')e+='select * from weather.forecast where location in ("'+d.location+'") and u="'+d.tempUnit+'"';else{d.error("No location given.");return false}$.ajax({url:e,dataType:'json',success:function(b){if(b!=null){var c=[];$.each(b.query.results,function(i,a){currentDate=new Date();sunRise=new Date(currentDate.toDateString()+' '+a.astronomy.sunrise);sunSet=new Date(currentDate.toDateString()+' '+a.astronomy.sunset);if(currentDate>sunRise&&currentDate<sunSet)timeOfDay='d';else timeOfDay='n';c["title"]=a.item.title;c["temp"]=a.item.condition.temp;c["units"]=[];c["units"]["temp"]=a.units.temperature;c["units"]["distance"]=a.units.distance;c["units"]["pressure"]=a.units.pressure;c["units"]["speed"]=a.units.speed;c["currently"]=a.item.condition.text;c["high"]=a.item.forecast[0].high;c["low"]=a.item.forecast[0].low;c["forecast"]=a.item.forecast[0].text;c["wind"]=[];c["wind"]["chill"]=a.wind.chill;c["wind"]["direction"]=a.wind.direction;c["wind"]["speed"]=a.wind.speed;c["humidity"]=a.atmosphere.humidity;c["pressure"]=a.atmosphere.pressure;c["rising"]=a.atmosphere.rising;c["visibility"]=a.atmosphere.visibility;c["sunrise"]=a.astronomy.sunrise;c["sunset"]=a.astronomy.sunset;c["description"]=a.item.description;c["image"]="http://l.yimg.com/a/i/us/nws/weather/gr/"+a.item.condition.code+timeOfDay+".png";c["tomorrow"]=[];c["tomorrow"]["high"]=a.item.forecast[1].high;c["tomorrow"]["low"]=a.item.forecast[1].low;c["tomorrow"]["forecast"]=a.item.forecast[1].text;c["tomorrow"]["date"]=a.item.forecast[1].date;c["tomorrow"]["day"]=a.item.forecast[1].day;c["tomorrow"]["image"]="http://l.yimg.com/a/i/us/nws/weather/gr/"+a.item.forecast[1].code+"d.png";c["city"]=a.location.city;c["country"]=a.location.country;c["region"]=a.location.region;c["updated"]=a.item.pubDate;c["link"]=a.item.link});d.success(c)}else{d.error("Bad request.")}}});return this}})})(jQuery);